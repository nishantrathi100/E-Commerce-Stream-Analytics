{"paragraphs":[{"title":"Advanced E-Commerce Business Intelligence System","text":"%pyspark\n\nfrom pyspark.sql import *\n\nstreamText = sc.textFile(z.input(\"Path of click stream log file\",\"/Users/nishantrathi/projects/BIProject/SparkAnalyticsProject/logs2.log\"))\n\nstreamSchema = StructType([StructField(\"userid\", StringType(), False),StructField(\"url\", StringType(), False),StructField(\"location\", StringType(), False),StructField(\"timestamp\", LongType(), False)])\n\nstreamline = streamText.map(lambda s: s.split(\" \")).map(lambda s:(str(s[0]), str(s[1]), str(s[2]), long(s[3]) ))\n\nstreamdf = sqlContext.createDataFrame(streamline,streamSchema)\nstreamdf.registerTempTable(\"clickstream\")\n","user":"anonymous","dateUpdated":"2017-05-09T00:38:19-0700","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"editOnDblClick":false,"language":"python"},"editorMode":"ace/mode/python","editorHide":true,"title":true,"tableHide":false},"settings":{"params":{"Path of click stream log file":"/Users/nishantrathi/projects/eclipseworkspace1/ClickStreamSimulator/logs_1494308533069.log"},"forms":{"Path of click stream log file":{"name":"Path of click stream log file","displayName":"Path of click stream log file","type":"input","defaultValue":"/Users/nishantrathi/projects/BIProject/SparkAnalyticsProject/logs2.log","hidden":false,"$$hashKey":"object:1052"}}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1493927033330_-1059313795","id":"20170504-124353_261950969","dateCreated":"2017-05-04T12:43:53-0700","dateStarted":"2017-05-09T00:38:19-0700","dateFinished":"2017-05-09T00:38:19-0700","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:324"},{"title":"Total Traffic","text":"%sql\nselect count(*) net_traffic  from clickstream","user":"anonymous","dateUpdated":"2017-05-09T00:38:22-0700","config":{"colWidth":4,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":318,"optionOpen":false},"helium":{}}},"editorSetting":{"editOnDblClick":false,"language":"sql"},"editorMode":"ace/mode/sql","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"net_traffic\n55479\n"}]},"apps":[],"jobName":"paragraph_1493929882960_1430179328","id":"20170504-133122_653240694","dateCreated":"2017-05-04T13:31:22-0700","dateStarted":"2017-05-09T00:38:22-0700","dateFinished":"2017-05-09T00:38:24-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:325"},{"title":"Traffic by Geography","text":"%sql\nselect location, count(*) from clickstream group by location","user":"anonymous","dateUpdated":"2017-05-09T00:38:27-0700","config":{"colWidth":8,"enabled":true,"results":{"0":{"graph":{"mode":"pieChart","height":320,"optionOpen":false},"helium":{}}},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql","title":true,"editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"location\tcount(1)\nSAN_ANTONIO\t3209\nLOS_ANGELES\t3817\nSAN_DIEGO\t3539\nNEW_YORK\t3561\nPHOENIX\t3294\nHOUSTON\t3747\nJACKSONVILLE\t3460\nLAS_VEGAS\t3163\nDALLAS\t3527\nSAN_FRANCISCO\t3241\nCHICAGO\t3537\nDETROIT\t3659\nPHILADELPHIA\t3220\nSAN_JOSE\t3342\nSEATTLE\t3362\nBOSTON\t3801\n"}]},"apps":[],"jobName":"paragraph_1493950363087_-1687327677","id":"20170504-191243_358004988","dateCreated":"2017-05-04T19:12:43-0700","dateStarted":"2017-05-09T00:38:27-0700","dateFinished":"2017-05-09T00:38:35-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:326"},{"title":"Total number of users","text":"%sql\nselect count(distinct(userid)) as no_of_users from clickstream\n","user":"anonymous","dateUpdated":"2017-05-09T00:40:20-0700","config":{"colWidth":4,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":312,"optionOpen":false}}},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql","editorHide":true,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"no_of_users\n3954\n"}]},"apps":[],"jobName":"paragraph_1493950400396_1169710386","id":"20170504-191320_157114488","dateCreated":"2017-05-04T19:13:20-0700","dateStarted":"2017-05-09T00:40:20-0700","dateFinished":"2017-05-09T00:42:59-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:327"},{"title":"Numbers of users by Geography","text":"%sql\nselect location, count(distinct(userid)) no_of_users from clickstream group by location","user":"anonymous","dateUpdated":"2017-05-09T00:43:03-0700","config":{"colWidth":8,"enabled":true,"results":{"0":{"graph":{"mode":"pieChart","height":312,"optionOpen":false},"helium":{}}},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql","editorHide":true,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"location\tno_of_users\nSAN_ANTONIO\t227\nLOS_ANGELES\t292\nSAN_DIEGO\t246\nNEW_YORK\t244\nPHOENIX\t243\nHOUSTON\t258\nJACKSONVILLE\t259\nLAS_VEGAS\t232\nDALLAS\t243\nSAN_FRANCISCO\t229\nCHICAGO\t249\nDETROIT\t267\nPHILADELPHIA\t224\nSAN_JOSE\t245\nSEATTLE\t235\nBOSTON\t261\n"}]},"apps":[],"jobName":"paragraph_1493954386808_475119840","id":"20170504-201946_407242988","dateCreated":"2017-05-04T20:19:46-0700","dateStarted":"2017-05-09T00:43:03-0700","dateFinished":"2017-05-09T00:43:25-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:328"},{"title":"Top 5 Items by popularity","text":"%sql\nselect distinct(url), count(*) visit_count from clickstream where url like '%item%' group by url order by visit_count limit 5","user":"anonymous","dateUpdated":"2017-05-09T00:47:39-0700","config":{"colWidth":6,"enabled":true,"results":{"0":{"graph":{"mode":"pieChart","height":344,"optionOpen":false},"helium":{}}},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql","editorHide":true,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"url\tvisit_count\n\\item\\ITEM17\t1411\n\\item\\ITEM16\t1413\n\\item\\ITEM7\t1418\n\\item\\ITEM15\t1425\n\\item\\ITEM18\t1430\n"}]},"apps":[],"jobName":"paragraph_1493954703048_-439364830","id":"20170504-202503_16284918","dateCreated":"2017-05-04T20:25:03-0700","dateStarted":"2017-05-09T00:47:40-0700","dateFinished":"2017-05-09T00:47:48-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:329"},{"title":"Order success vs failure","text":"%sql\nselect distinct(url), count(*) order_count from clickstream where url like '%orderSuccess%' or  url like '%orderFailure%'  group by url","user":"anonymous","dateUpdated":"2017-05-09T00:46:27-0700","config":{"colWidth":6,"enabled":true,"results":{"0":{"graph":{"mode":"pieChart","height":344,"optionOpen":false},"helium":{}}},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/sql","editorHide":true,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"url\torder_count\n\\orderSuccess\t1334\n\\orderFailure\t303\n"}]},"apps":[],"jobName":"paragraph_1493958401015_226285228","id":"20170504-212641_844086370","dateCreated":"2017-05-04T21:26:41-0700","dateStarted":"2017-05-09T00:46:27-0700","dateFinished":"2017-05-09T00:47:36-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:330"},{"title":"Average Time a user spend on website","text":"%sql\n\nselect avg(duration) from \n(\nselect userid, (max(timestamp) - min(timestamp)) duration  from clickstream group by userid\n)","user":"anonymous","dateUpdated":"2017-05-09T01:02:23-0700","config":{"colWidth":4,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":320,"optionOpen":false}}},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql","title":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"avg(duration)\n18.764795144157816\n"}]},"apps":[],"jobName":"paragraph_1493959777942_1724290008","id":"20170504-214937_920282353","dateCreated":"2017-05-04T21:49:37-0700","dateStarted":"2017-05-09T01:02:23-0700","dateFinished":"2017-05-09T01:02:30-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:331"},{"title":"Order failure by geography","text":"%sql\nselect location, count(url) from clickstream where url like '%orderFailure%' group by location","user":"anonymous","dateUpdated":"2017-05-09T00:47:53-0700","config":{"colWidth":8,"enabled":true,"results":{"0":{"graph":{"mode":"pieChart","height":324,"optionOpen":false},"helium":{}}},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/sql","title":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"location\tcount(url)\nSAN_ANTONIO\t23\nLOS_ANGELES\t19\nSAN_DIEGO\t18\nNEW_YORK\t20\nPHOENIX\t23\nHOUSTON\t15\nJACKSONVILLE\t19\nLAS_VEGAS\t10\nDALLAS\t11\nSAN_FRANCISCO\t25\nCHICAGO\t25\nDETROIT\t19\nSAN_JOSE\t20\nPHILADELPHIA\t16\nSEATTLE\t22\nBOSTON\t18\n"}]},"apps":[],"jobName":"paragraph_1493965231480_-1007551723","id":"20170504-232031_934421912","dateCreated":"2017-05-04T23:20:31-0700","dateStarted":"2017-05-09T00:47:52-0700","dateFinished":"2017-05-09T00:47:59-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:332"},{"title":"Order from different geography","text":"%sql\nselect location, count(url) from clickstream where url like '%orderSuccess%' group by location\n","user":"anonymous","dateUpdated":"2017-05-09T01:02:43-0700","config":{"colWidth":12,"enabled":true,"results":{"0":{"graph":{"mode":"pieChart","height":378,"optionOpen":false},"helium":{}}},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/sql","editorHide":true,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"location\tcount(url)\nSAN_ANTONIO\t66\nLOS_ANGELES\t98\nSAN_DIEGO\t72\nNEW_YORK\t90\nPHOENIX\t73\nHOUSTON\t84\nJACKSONVILLE\t92\nLAS_VEGAS\t83\nDALLAS\t90\nSAN_FRANCISCO\t88\nCHICAGO\t85\nDETROIT\t85\nPHILADELPHIA\t85\nSAN_JOSE\t75\nSEATTLE\t80\nBOSTON\t88\n"}]},"apps":[],"jobName":"paragraph_1493961285364_-1684748061","id":"20170504-221445_2003527282","dateCreated":"2017-05-04T22:14:45-0700","dateStarted":"2017-05-09T01:02:43-0700","dateFinished":"2017-05-09T01:02:50-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:333"},{"title":"Total number of users","text":"%sql\nselect count(distinct(userid)) no_of_users from clickstream","user":"anonymous","dateUpdated":"2017-05-09T01:02:06-0700","config":{"colWidth":6,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":122,"optionOpen":false}}},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql","title":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"no_of_users\n3954\n"}]},"apps":[],"jobName":"paragraph_1493966700070_-538614502","id":"20170504-234500_1591520547","dateCreated":"2017-05-04T23:45:00-0700","dateStarted":"2017-05-09T01:02:06-0700","dateFinished":"2017-05-09T01:02:15-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:334"},{"title":"Number of users who attempted to place an order","text":"%sql\nselect count(distinct(userid)) no_of_order_placed_attempt from clickstream where url like '%placeOrder%' ","user":"anonymous","dateUpdated":"2017-05-09T00:56:20-0700","config":{"colWidth":6,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":122,"optionOpen":false}}},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql","title":true,"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"no_of_order_placed_attempt\n1637\n"}]},"apps":[],"jobName":"paragraph_1493966151828_-380064017","id":"20170504-233551_1784303480","dateCreated":"2017-05-04T23:35:51-0700","dateStarted":"2017-05-09T00:56:20-0700","dateFinished":"2017-05-09T01:02:03-0700","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:335"},{"text":"%sql\n","user":"anonymous","dateUpdated":"2017-05-09T00:31:18-0700","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql","editorHide":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1493967948767_-1094412506","id":"20170505-000548_87610654","dateCreated":"2017-05-05T00:05:48-0700","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:336"}],"name":"Daily Summary Dashboard","id":"2CG8TG3CR","angularObjects":{"2CFZ99VB7:shared_process":[],"2CFQDA7N6:shared_process":[],"2CFEGM817:shared_process":[],"2CH38FHDK:shared_process":[],"2CH234Q92:shared_process":[],"2CFDTSWJ5:shared_process":[],"2CHFK8GB7:shared_process":[],"2CH1CMA3H:shared_process":[],"2CH31N3YB:shared_process":[],"2CFP5E9CW:shared_process":[],"2CGJ8UE9W:shared_process":[],"2CHYR7DEM:shared_process":[],"2CEE3CDBD:shared_process":[],"2CH414GMZ:shared_process":[],"2CJABYPDQ:shared_process":[],"2CGCWRTT7:shared_process":[],"2CEZT654A:shared_process":[],"2CH4S33P7:shared_process":[],"2CFSZVEV9:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}